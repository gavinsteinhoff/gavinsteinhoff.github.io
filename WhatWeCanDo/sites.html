<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="./style.css">
    <title>Hello, world!</title>
</head>
<body class="" style="background-color:#FFFAFA; overflow-x:hidden">
    <div style="overflow-x:hidden">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#siteNav" aria-controls="siteNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-md-center" id="siteNav">
                <span class="navbar-brand m-0 h1 pr-5">WWCD</span>
                <ul class="navbar-nav">
                    <li class="nav-item" id="index">
                        <a class="nav-link px-5" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item" id="about">
                        <a class="nav-link px-5" href="./about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-5" href="./about.html#people">Committee</a>
                    </li>
                    <li class="nav-item" id="sites">
                        <a class="nav-link px-5" href="./sites.html">Sites</a>
                    </li>
                    <li class="nav-item" id="signup">
                        <a class="nav-link px-5" href="./signup.html">Sign Up</a>
                    </li>
                </ul>
            </div>
        </nav>

        <div id="tite" class="pt-5 pl-5">
            <h1 class="display-1">Sites</h1>
        </div>
        <div id="sitesContent" class="row justify-content-center px-5">
            <!--<div class="col-auto border border-dark rounded bg-primary p-1 mr-1 mb-1">
                <a href="./sites.html?site=0">
                    <div class="site align-items-center">
                        <div class="d-flex">
                            <img class="site-img" width="300" height="200" src="./img/temp/untitled3.png" />
                            <p class="position-absolute mt-1 ml-2 img-text invisible"><b>Harvesters</b><br />packaging and shipping foods for people</p>
                        </div>
                    </div>
                </a>
            </div>-->
            <!--<div class="col">
                <h1 class="display-1 d-none d-md-block">Harvesters</h1>
                <h1 class="display-4 d-sx-block d-md-none">Harvesters</h1>
                <p>packaging and shipping foods for people</p>
                <p><b>Phone Number:</b> 123465798</p>
                <p><b>Email Address:</b> asdsa@fadf.com</p>
                <p><b>Address:</b> 5454sd sadasdas</p>
                <a class="btn btn-primary" href="./sites.html">Back to Sites</a>
            </div>
            <div class="col-auto pt-5">
                <img class="border border-dark rounded d-none d-lg-block" width="600" height="400" src="./img/temp/untitled3.png" />
                <img class="border border-dark rounded d-xs-block d-lg-none" width="300" height="200" src="./img/temp/untitled3.png" />
            </div>-->
        </div>






        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <script src="./utils.js"></script>
        <script>

            var sites = [
                {
                    id: 0,
                    name: "Harvesters",
                    desc: "Package and ship food to food banks",
                    phone: "(785) 500 - 5000",
                    email: "stuff@stuff.com",
                    address: "4515 thing topeka ks",
                    img: "./img/temp/untitled3.png"
                },
                            {
                                id: 2,
                                name: "ers",
                                desc: "Package and ship food to food banks",
                                phone: "(785) 500 - 5000",
                                email: "stuff@stuff.com",
                                address: "4515 thing topeka ks",
                                img: "./img/temp/untitled3.png"
                            }
            ];



            function buildSites() {
                $.each(sites, function (key, site) {
                    var base = $("<div>").addClass("col-auto border border-dark rounded bg-primary p-1 mr-1 mb-1");
                    var link = $("<a>").attr("href", "./sites.html?site=" + site.id);
                    var base2 = $("<div>").addClass("site align-items-center");
                    var base3 = $("<div>").addClass("d-flex");
                    var img = $("<img>").addClass("site-img");
                    img.attr("width", "300");
                    img.attr("height", "200");
                    img.attr("src", site.img);
                    var text = $("<p>").addClass("position-absolute mt-1 ml-2 img-text invisible");
                    text.html("<b>" + site.name + "</b><br />" + site.desc);
                    $("#sitesContent").append(base.append(link.append(base2.append(base3.append(img, text)))));
                })
            }


            function buildSite(id) {
                var site = sites.filter(s=>s.id == id)[0];
                var base = $("<div>").addClass("col");
                var name1 = $("<h1>").addClass("display-1 d-none d-md-block").html(site.name);
                var name2 = $("<h1>").addClass("display-4 d-sx-block d-md-none").html(site.name);
                var desc = $("<p>").html(site.desc);
                var phone = $("<p>").html(site.phone);
                var email = $("<p>").html(site.email);
                var addr = $("<p>").html(site.address);
                var backlink = $("<a>").addClass("btn btn-primary").attr("href", "./sites.html").html("Back to Sites");
                base.append(name1, name2, desc, phone, email, addr, backlink);
                var base2 = $("<div>").addClass("col-auto pt-3");
                var img1 = $("<img>").addClass("border border-dark rounded d-none d-lg-block").attr("width", "600").attr("height", "400").attr("src", site.img);
                var img2 = $("<img>").addClass("border border-dark rounded d-xs-block d-lg-none").attr("width", "300").attr("height", "200").attr("src", site.img);
                base2.append(img1, img2);
                $("#sitesContent").append(base, base2);
            }



            $(document).ready(function () {
                if ((window.location.search.substr(1).split("=")[1]) != undefined) {
                    buildSite(window.location.search.substr(1).split("=")[1]);
                } else {
                    buildSites();
                    if ($(window).width() >= 1024) {
                        $(".site").hover(
                            function () {
                                $(this).find(".site-img").addClass("grayBlur");
                                $(this).find(".img-text").removeClass("invisible");
                            },
                            function () {
                                $(this).find(".site-img").removeClass("grayBlur");
                                $(this).find(".img-text").addClass("invisible");
                            }
                        );
                    } else {
                        $(".site-img").each(function () { $(this).addClass("grayBlur") });
                        $(".img-text").each(function () { $(this).removeClass("invisible") });
                    }
                }
            });

        </script>
        <style>
            .grayBlur {
                -webkit-filter: blur(2px) grayscale(80%);
                filter: blur(2px) grayscale(80%);
            }

            .img-text {
                color: white;
                font-size: 16px;
                text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000 !important;
            }
        </style>
    </div>
</body>
</html>